# 🧪 中越双语教学视频转换工具 - 完整流程测试指南

## 📋 测试准备

### 1. 服务状态检查
- ✅ 前端服务：http://localhost:5173
- ⏳ 后端服务：http://localhost:8088 (启动中)
- 📹 测试视频：`backend/test_vn.mp4` (14MB)

### 2. 测试环境确认
```bash
# 检查前端服务
访问：http://localhost:5173

# 检查后端服务（稍等几分钟启动）
访问：http://localhost:8088/api/video/status
```

## 🚀 完整流程测试步骤

### 第一步：访问应用首页
1. 打开浏览器访问：http://localhost:5173
2. 应该看到现代化的上传界面
3. 确认页面正常加载，无控制台错误

### 第二步：上传测试视频
1. 在上传页面，你可以：
   - **方式一**：点击上传区域选择文件
   - **方式二**：直接拖拽 `backend/test_vn.mp4` 到上传区域
2. 选择测试视频文件（14MB）
3. 确认文件信息显示正确
4. 点击"开始上传"按钮
5. 观察上传进度和状态

### 第三步：监控处理过程
1. 上传成功后自动跳转到处理页面
2. 观察以下内容：
   - **总进度条**：显示整体处理进度
   - **步骤指示器**：6个处理步骤的状态
   - **实时状态**：当前处理步骤的描述

### 第四步：使用调试工具（重要！）
1. 点击"显示调试工具"按钮
2. 使用调试功能：
   - **检查服务状态**：验证后端服务运行正常
   - **测试音频提取**：验证FFmpeg功能
   - **测试语音识别**：验证Whisper集成
   - **刷新任务状态**：手动更新任务信息
3. 观察实时日志输出

### 第五步：查看处理结果
1. 等待处理完成（约1-2分钟）
2. 查看成功页面：
   - 🎉 处理完成提示
   - 操作按钮：编辑字幕、下载字幕
3. 点击"编辑字幕"进入编辑页面

### 第六步：历史记录管理
1. 访问历史页面：http://localhost:5173/history
2. 查看功能：
   - **统计面板**：总数、处理中、已完成、失败
   - **任务列表**：所有处理任务
   - **筛选功能**：按状态筛选
   - **搜索功能**：按文件名搜索
   - **操作菜单**：重试、下载、删除等

## 🔍 详细测试项目

### A. 上传功能测试
- [ ] 文件格式验证（支持MP4、AVI、MOV）
- [ ] 文件大小检查（最大500MB）
- [ ] 拖拽上传功能
- [ ] 点击上传功能
- [ ] 上传进度显示
- [ ] 上传错误处理

### B. 处理流程测试
- [ ] 任务状态轮询
- [ ] 进度条实时更新
- [ ] 6步处理流程显示
- [ ] 处理错误捕获
- [ ] 完成状态展示

### C. 调试工具测试
- [ ] 服务状态检查
- [ ] 音频提取测试
- [ ] 语音识别测试
- [ ] 任务状态刷新
- [ ] 实时日志显示
- [ ] 日志分类显示（成功/错误/信息）

### D. 历史管理测试
- [ ] 任务列表加载
- [ ] 统计数据准确性
- [ ] 状态筛选功能
- [ ] 文件名搜索
- [ ] 任务操作菜单
- [ ] 时间显示格式

### E. 错误处理测试
- [ ] 网络断连处理
- [ ] 服务异常处理
- [ ] 文件格式错误
- [ ] 文件过大错误
- [ ] 处理失败重试

## 📊 期望的测试结果

### 成功指标
1. **上传成功**：文件正确上传到服务器
2. **音频提取**：FFmpeg成功提取音频
3. **语音识别**：Whisper返回识别文本
4. **翻译处理**：中文转越南语翻译
5. **字幕生成**：生成双语字幕文件

### 日志示例
```
[20:15:54] 开始处理任务 ID: 2
[20:15:54] 开始测试音频提取 - 任务ID: 2
[20:15:55] 音频提取成功: 已提取音频
[20:15:55] 开始测试语音识别 - 任务ID: 2
[20:15:56] 语音识别成功: 已生成文本
[20:15:56] 服务状态检查: {"ffmpeg":"可用","whisper":"模拟模式"}
```

## 🐛 常见问题处理

### 问题1：后端连接失败
```
解决方案：
1. 等待后端完全启动（约2-3分钟）
2. 检查端口8088是否被占用
3. 查看后端启动日志
```

### 问题2：文件上传失败
```
解决方案：
1. 检查文件格式和大小
2. 确认后端服务正常
3. 查看浏览器控制台错误
```

### 问题3：处理卡住不动
```
解决方案：
1. 使用调试工具检查服务状态
2. 手动刷新任务状态
3. 查看实时日志输出
```

## 🎯 测试完成检查清单

完成以下所有项目即表示测试成功：

- [ ] 成功访问前端应用
- [ ] 成功上传测试视频
- [ ] 处理流程正常进行
- [ ] 调试工具功能正常
- [ ] 获得处理完成结果
- [ ] 历史记录功能正常
- [ ] 日志输出清晰可读
- [ ] 错误处理机制正常

## 📞 需要帮助？

如在测试过程中遇到问题：
1. 查看浏览器控制台错误
2. 检查后端启动日志
3. 使用调试工具排查问题
4. 参考错误处理指南

---

**开始测试时间**：___________  
**测试完成时间**：___________  
**测试结果**：□ 通过 □ 失败 □ 部分通过 